# Tool Selection Prompt Template
# Used to help the LLM decide which tools to use

tool_selection_prompt: |
  Analyze the user's query and determine which tools, if any, should be used.
  
  Query: {{ query }}
  
  Available Tools:
  {% for tool in available_tools %}
  - **{{ tool.name }}**: {{ tool.description }}
    Arguments: {{ tool.arguments | tojson }}
  {% endfor %}
  
  Instructions:
  1. If the query can be answered from your knowledge, set requires_tool: false
  2. If tools are needed, list them with their required arguments
  3. Extract specific values from the query (numbers, code, URLs, etc.)
  4. If information is missing, provide a clarification question
  
  Respond with a JSON object:
  ```json
  {
    "requires_tool": true/false,
    "tools": [
      {
        "name": "tool_name",
        "arguments": {"arg": "value"},
        "reason": "Why this tool is needed"
      }
    ],
    "clarification_question": "Question if needed" or null
  }
  ```

# Variants
variants:
  - name: strict_json
    tool_selection_prompt: |
      Return ONLY a JSON object. No explanation outside the JSON.
      {{ base_prompt }}
      
  - name: chain_of_thought
    tool_selection_prompt: |
      Think step by step:
      1. What is the user asking for?
      2. Can I answer this from knowledge?
      3. Which tools would help?
      4. What arguments do I need?
      
      {{ base_prompt }}
